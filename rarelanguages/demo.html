<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gheg Albanian Learning - Phase 2.2 Demo</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes shrink {
            from { width: 100%; }
            to { width: 0%; }
        }
        
        .touch-manipulation {
            touch-action: manipulation;
        }
        
        .perspective-1000 {
            perspective: 1000px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Simple demo component to test the UI structure
        const SimpleDemoApp = () => {
            const [currentView, setCurrentView] = React.useState('flashcard');
            
            // Mock data
            const mockContent = [
                {
                    id: "1",
                    english_phrase: "This is my father",
                    target_phrase: "Ky √´sht√´ babai im",
                    pronunciation_guide: "Kuh eh-sht bah-bye eem",
                    cultural_context: "Albanian families are very close-knit. Always show respect when introducing family members.",
                    difficulty_score: 3
                },
                {
                    id: "2",
                    english_phrase: "Good morning",
                    target_phrase: "Mir√´m√´ngjes",
                    pronunciation_guide: "Mee-ruh-men-guess",
                    cultural_context: "Standard morning greeting used throughout Albania and Kosovo.",
                    difficulty_score: 2
                },
                {
                    id: "3",
                    english_phrase: "Thank you very much",
                    target_phrase: "Shum√´ faleminderit",
                    pronunciation_guide: "Shoo-muh fah-leh-meen-deh-reet",
                    cultural_context: "Shows proper appreciation. Important in Albanian hospitality culture.",
                    difficulty_score: 4
                }
            ];
            
            // Simple flashcard demo
            const FlashcardDemo = () => {
                const [currentIndex, setCurrentIndex] = React.useState(0);
                const [isFlipped, setIsFlipped] = React.useState(false);
                const [showDifficulty, setShowDifficulty] = React.useState(false);
                
                const currentCard = mockContent[currentIndex];
                
                const flipCard = () => {
                    setIsFlipped(!isFlipped);
                    if (!isFlipped) {
                        setShowDifficulty(true);
                    }
                };
                
                const handleDifficulty = (level) => {
                    setShowDifficulty(false);
                    setIsFlipped(false);
                    if (currentIndex < mockContent.length - 1) {
                        setCurrentIndex(currentIndex + 1);
                    } else {
                        alert('Flashcards complete!');
                    }
                };
                
                const playAudio = () => {
                    try {
                        const utterance = new SpeechSynthesisUtterance(currentCard.target_phrase);
                        utterance.lang = 'sq-AL';
                        utterance.rate = 0.8;
                        speechSynthesis.speak(utterance);
                    } catch (error) {
                        console.error('Audio failed:', error);
                    }
                };
                
                return (
                    <div className="max-w-2xl mx-auto p-4 space-y-6">
                        {/* Progress */}
                        <div className="w-full">
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-sm font-medium text-gray-700">Flashcard Progress</span>
                                <span className="text-sm text-gray-600">
                                    {currentIndex + 1} / {mockContent.length}
                                </span>
                            </div>
                            <div className="w-full h-3 bg-gray-200 rounded-full">
                                <div 
                                    className="h-3 bg-blue-600 rounded-full transition-all duration-300"
                                    style={{ width: `${((currentIndex + 1) / mockContent.length) * 100}%` }}
                                />
                            </div>
                        </div>
                        
                        {/* Card */}
                        <div 
                            className="bg-white rounded-lg shadow-lg border-2 border-gray-200 p-8 min-h-64 cursor-pointer transform transition-transform hover:scale-105"
                            onClick={flipCard}
                        >
                            {!isFlipped ? (
                                <div className="text-center space-y-4">
                                    <div className="text-sm font-medium text-gray-500 uppercase">English</div>
                                    <div className="text-2xl font-medium text-gray-900">{currentCard.english_phrase}</div>
                                    <div className="text-gray-400 text-sm mt-8">Tap to reveal Albanian translation</div>
                                </div>
                            ) : (
                                <div className="text-center space-y-4">
                                    <div className="text-sm font-medium text-blue-600 uppercase">Gheg Albanian</div>
                                    <div className="text-2xl font-bold text-blue-900">{currentCard.target_phrase}</div>
                                    <div className="text-lg text-gray-600 italic">/{currentCard.pronunciation_guide}/</div>
                                    <button 
                                        onClick={(e) => { e.stopPropagation(); playAudio(); }}
                                        className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg"
                                    >
                                        üîä Play Audio
                                    </button>
                                </div>
                            )}
                        </div>
                        
                        {/* Cultural Context */}
                        {isFlipped && (
                            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <div className="flex items-center gap-2 mb-2">
                                    <span>üèõÔ∏è</span>
                                    <span className="font-medium text-blue-800">Cultural Context</span>
                                </div>
                                <p className="text-blue-700 text-sm">{currentCard.cultural_context}</p>
                            </div>
                        )}
                        
                        {/* Difficulty Buttons */}
                        {showDifficulty && (
                            <div className="space-y-3">
                                <div className="text-center text-sm text-gray-600">How well did you know this?</div>
                                <div className="grid grid-cols-2 sm:grid-cols-4 gap-2">
                                    {[
                                        { level: 1, label: 'Again', color: 'bg-red-500 hover:bg-red-600' },
                                        { level: 2, label: 'Hard', color: 'bg-orange-500 hover:bg-orange-600' },
                                        { level: 3, label: 'Good', color: 'bg-blue-500 hover:bg-blue-600' },
                                        { level: 4, label: 'Easy', color: 'bg-green-500 hover:bg-green-600' }
                                    ].map(button => (
                                        <button
                                            key={button.level}
                                            onClick={() => handleDifficulty(button.level)}
                                            className={`${button.color} text-white font-medium py-3 px-4 rounded-lg transition-all`}
                                        >
                                            <div className="text-center">
                                                <div className="font-bold">{button.label}</div>
                                                <div className="text-xs opacity-75">{button.level}</div>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        {/* Instructions */}
                        <div className="text-center text-sm text-gray-500">
                            <div>Click card to flip ‚Ä¢ Press 1-4 for difficulty</div>
                            <div>This is a simplified demo of the FlashcardExercise component</div>
                        </div>
                    </div>
                );
            };
            
            // Simple visual demo
            const VisualDemo = () => {
                const [currentIndex, setCurrentIndex] = React.useState(0);
                const [selectedImage, setSelectedImage] = React.useState(null);
                
                const visualContent = [
                    {
                        phrase: "Ky √´sht√´ babai im",
                        pronunciation: "Kuh eh-sht bah-bye eem",
                        images: ["üë®‚Äçü¶≥", "üë©‚Äçü¶≥", "üë¶", "üëß"],
                        correct: 0
                    },
                    {
                        phrase: "Mir√´m√´ngjes",
                        pronunciation: "Mee-ruh-men-guess",
                        images: ["üåÖ", "üåÑ", "üåô", "üåÜ"],
                        correct: 0
                    }
                ];
                
                const currentItem = visualContent[currentIndex];
                
                const playPhrase = () => {
                    try {
                        const utterance = new SpeechSynthesisUtterance(currentItem.phrase);
                        utterance.lang = 'sq-AL';
                        utterance.rate = 0.7;
                        speechSynthesis.speak(utterance);
                    } catch (error) {
                        console.error('Audio failed:', error);
                    }
                };
                
                const selectImage = (imageIndex) => {
                    if (selectedImage !== null) return;
                    
                    setSelectedImage(imageIndex);
                    const isCorrect = imageIndex === currentItem.correct;
                    
                    setTimeout(() => {
                        if (currentIndex < visualContent.length - 1) {
                            setCurrentIndex(currentIndex + 1);
                            setSelectedImage(null);
                        } else {
                            alert('Visual exercise complete!');
                        }
                    }, 2000);
                };
                
                React.useEffect(() => {
                    const timer = setTimeout(playPhrase, 1000);
                    return () => clearTimeout(timer);
                }, [currentIndex]);
                
                return (
                    <div className="max-w-2xl mx-auto p-4 space-y-6">
                        {/* Progress */}
                        <div className="w-full">
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-sm font-medium text-gray-700">Visual Learning Progress</span>
                                <span className="text-sm text-gray-600">
                                    {currentIndex + 1} / {visualContent.length}
                                </span>
                            </div>
                            <div className="w-full h-3 bg-gray-200 rounded-full">
                                <div 
                                    className="h-3 bg-purple-600 rounded-full transition-all duration-300"
                                    style={{ width: `${((currentIndex + 1) / visualContent.length) * 100}%` }}
                                />
                            </div>
                        </div>
                        
                        {/* Exercise */}
                        <div className="bg-white rounded-lg shadow-lg border-2 border-gray-200 p-6 space-y-6">
                            <div className="text-center">
                                <h2 className="text-lg font-medium text-gray-900 mb-2">üîä Listen and select the correct image</h2>
                                <p className="text-sm text-gray-600">No translation - learn through direct association</p>
                            </div>
                            
                            <div className="text-center space-y-3">
                                <div className="text-2xl font-bold text-blue-900">{currentItem.phrase}</div>
                                <div className="text-sm text-gray-500 italic">/{currentItem.pronunciation}/</div>
                                <button 
                                    onClick={playPhrase}
                                    className="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg"
                                >
                                    üîä Play Audio
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-2 gap-4">
                                {currentItem.images.map((image, index) => (
                                    <button
                                        key={index}
                                        onClick={() => selectImage(index)}
                                        disabled={selectedImage !== null}
                                        className={`
                                            relative aspect-square rounded-lg border-4 transition-all transform
                                            flex items-center justify-center text-6xl
                                            ${selectedImage === index
                                                ? index === currentItem.correct
                                                    ? 'border-green-500 bg-green-50'
                                                    : 'border-red-500 bg-red-50'
                                                : selectedImage !== null
                                                ? index === currentItem.correct
                                                    ? 'border-green-500 bg-green-50'
                                                    : 'border-gray-200 bg-gray-100'
                                                : 'border-gray-300 hover:border-blue-400 hover:bg-blue-50'
                                            }
                                            ${selectedImage !== null ? 'cursor-not-allowed' : 'cursor-pointer hover:scale-105'}
                                        `}
                                    >
                                        {image}
                                        {selectedImage === index && (
                                            <div className="absolute inset-0 rounded-lg flex items-center justify-center">
                                                <span className="text-4xl">
                                                    {index === currentItem.correct ? '‚úÖ' : '‚ùå'}
                                                </span>
                                            </div>
                                        )}
                                    </button>
                                ))}
                            </div>
                        </div>
                        
                        <div className="text-center text-sm text-gray-500">
                            This is a simplified demo of the VisualExercise component
                        </div>
                    </div>
                );
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-200 p-4">
                        <div className="max-w-4xl mx-auto">
                            <h1 className="text-2xl font-bold text-gray-900 mb-4">
                                üá¶üá± Gheg Albanian Learning - Phase 2.2 Demo
                            </h1>
                            
                            <div className="flex gap-2 mb-4">
                                <button
                                    onClick={() => setCurrentView('flashcard')}
                                    className={`px-4 py-2 rounded-lg font-medium ${currentView === 'flashcard' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}`}
                                >
                                    üÉè Flashcards
                                </button>
                                <button
                                    onClick={() => setCurrentView('visual')}
                                    className={`px-4 py-2 rounded-lg font-medium ${currentView === 'visual' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}`}
                                >
                                    üñºÔ∏è Visual Learning
                                </button>
                            </div>
                            
                            <div className="bg-green-50 border border-green-200 rounded-lg p-3">
                                <p className="text-sm text-green-800">
                                    <strong>‚ú® Phase 2.2 Complete!</strong> This demo shows simplified versions of the components. 
                                    The full implementation includes mobile gestures, audio recording, conversation scenarios, and more.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    {/* Content */}
                    <div className="py-6">
                        {currentView === 'flashcard' && <FlashcardDemo />}
                        {currentView === 'visual' && <VisualDemo />}
                    </div>
                    
                    {/* Footer */}
                    <div className="bg-blue-50 border-t border-blue-200 p-4">
                        <div className="max-w-2xl mx-auto text-center">
                            <h3 className="font-medium text-blue-900 mb-2">üéÆ Demo Features</h3>
                            <div className="text-sm text-blue-800 space-y-1">
                                <p><strong>Audio:</strong> Click audio buttons to hear Albanian pronunciation</p>
                                <p><strong>Flashcards:</strong> Click to flip, rate difficulty 1-4</p>
                                <p><strong>Visual Learning:</strong> Direct Albanian-meaning association</p>
                                <p><strong>Cultural Context:</strong> Learn family dynamics and etiquette</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        ReactDOM.render(<SimpleDemoApp />, document.getElementById('root'));
    </script>
</body>
</html>